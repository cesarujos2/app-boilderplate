<div class="flex flex-wrap items-center p-2">
    <div class="w-11/12 flex flex-col gap-1">
        <div *ngFor="let utm of utmForms; let i = index"
            class="w-full flex justify-between items-center">
            <form class="flex flex-wrap flex-1" [formGroup]="utm">
                <div class="w-full sm:w-1/3 pr-0 sm:pr-2">
                    <mat-form-field class="w-full" appearance="outline">
                        <mat-label>Zona</mat-label>
                        <mat-select matInput formControlName="zone" >
                            <mat-option value="17S" class="dark:bg-gray-700 dark:text-white">17</mat-option>
                            <mat-option value="18S" class="dark:bg-gray-700 dark:text-white">18</mat-option>
                            <mat-option value="19S" class="dark:bg-gray-700 dark:text-white">19</mat-option>
                        </mat-select>
                        <mat-error
                            *ngIf="utm.get('zone')?.hasError('required')">
                            Este campo es requerido
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="w-full sm:w-1/3 px-0 sm:px-1">
                    <mat-form-field class="w-full" appearance="outline">
                        <mat-label>Este</mat-label>
                        <input matInput formControlName="easting" autocomplete="off" 
                               class="dark:text-white dark:bg-gray-700" />
                        <mat-error
                            *ngIf="utm.get('easting')?.hasError('required')">
                            Este campo es requerido
                        </mat-error>
                        <mat-error
                            *ngIf="utm.get('easting')?.hasError('pattern')">
                            Valor incorrecto
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="w-full sm:w-1/3 pl-0 sm:pl-2">
                    <mat-form-field class="w-full" appearance="outline">
                        <mat-label>Oeste</mat-label>
                        <input matInput formControlName="northing" autocomplete="off"
                               class="dark:text-white dark:bg-gray-700"/>
                        <mat-error
                            *ngIf="utm.get('northing')?.hasError('required')">
                            Este campo es requerido
                        </mat-error>
                        <mat-error
                            *ngIf="utm.get('northing')?.hasError('pattern')">
                            Valor incorrecto
                        </mat-error>
                    </mat-form-field>
                </div>
            </form>
            <button mat-icon-button aria-label="Eliminar coordenadas UTM"
                *ngIf="utmForms.length > 1"
                (click)="removeUTMForm(i)" matTooltip="Eliminar">
                <mat-icon class="text-red-600 dark:text-red-400">close</mat-icon>
            </button>
        </div>
    </div>
    <div class="w-1/12 flex justify-center">
        <button mat-mini-fab aria-label="Añadir coordenadas UTM"
            class="bg-emerald-600! text-white!" 
            (click)="$event.preventDefault(); addUTMForm($event)"
            matTooltip="Añadir coordenada UTM">
            <mat-icon class="text-white">add</mat-icon>
        </button>
    </div>
</div>
<div class="w-full flex justify-center mt-3 p-2 bg-red-50 dark:bg-red-900/20 rounded-md">
    <mat-error class="text-base mb-1 text-red-600 dark:text-red-400" 
               *ngIf="form().hasError('invalidUTM')">
        Coordenadas en zona no permitida
    </mat-error>
</div>